{"version":3,"sources":["util.js","constants.js","Common/InputField.js","scss/inputField.module.scss","scss/bookDetail.module.scss","image/success.jpg","image/fail.png","BookList/BookDetail.js"],"names":["getData","path","axios","get","patchData","obj","patch","addData","post","deleteData","delete","handleAlert","msg","method","setTimeout","getBooksUrl","InputField","title","editable","value","inputValue","className","styles","inputField","type","placeholder","onChange","e","target","inputArea","fixField","module","exports","BookDetail","bookId","useParams","history","useHistory","useState","bookDetail","setBookDetail","header","setHeader","setTitle","author","setAuthor","desc","setDesc","alert","setAlert","isEditable","setIsEditable","load","setLoad","useEffect","then","res","data","handleClearInput","pre","bookDetailHeader","to","onClick","backIcon","icon","faChevronLeft","hide","editIcon","faEdit","bookDetailBody","bookDetailInputAll","description","bookDetailEditAll","btn","push","catch","editBookDetail","alertMsg","noAlertMsg","src","failImg","alt","successMsg","successImg","failMsg","React","memo"],"mappings":"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","file":"static/js/5.c0cd980b.chunk.js","sourcesContent":["import axios from \"axios\";\n\nfunction getData(path) {\n    return axios.get(path)\n}\n\nfunction patchData(path, obj) {\n    return axios.patch(path, obj)\n}\n\nfunction addData(path, obj) {\n    return axios.post(path, obj)\n}\n\nfunction deleteData(path) {\n    return axios.delete(path)\n}\n\nconst handleAlert = (msg, method) => {\n    method(msg);\n    setTimeout(() => {\n        method(\"\");\n    }, 1500)\n}\n\n\nexport {\n    getData, patchData, addData,  deleteData, handleAlert\n}","const getBooksUrl = \"https://fe-interview-api.unnotech.com/api/book/\"\n\nexport {\n    getBooksUrl\n}","import React from \"react\"\nimport styles from \"../scss/inputField.module.scss\"\n\nconst InputField = ({title, editable, value, method, inputValue}) => {\n    if (editable && title !== \"備註\") {\n        return <input className={styles.inputField} type=\"text\" placeholder={title} value={inputValue}\n                      onChange={(e) => method(e.target.value)}/>\n    } else if (editable && title === \"備註\") {\n        return <textarea className={styles.inputArea} placeholder={title} value={inputValue}\n                         onChange={(e) => method(e.target.value)}/>\n    } else {\n        return <div className={styles.fixField}>{title}: {value}</div>\n    }\n}\n\nexport default InputField","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputField\":\"inputField_inputField__2EPd0\",\"inputArea\":\"inputField_inputArea__3-Nvo\",\"fixField\":\"inputField_fixField__1Di5r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bookDetailHeader\":\"bookDetail_bookDetailHeader__23FWM\",\"addBookHeader\":\"bookDetail_addBookHeader__gJXMy\",\"backIcon\":\"bookDetail_backIcon__3jyie\",\"editIcon\":\"bookDetail_editIcon__2wigb\",\"back\":\"bookDetail_back__2kTjm\",\"bookDetailBody\":\"bookDetail_bookDetailBody__1U9OJ\",\"addBookBody\":\"bookDetail_addBookBody__25EDa\",\"bookDetailInputAll\":\"bookDetail_bookDetailInputAll__3NBdv\",\"addBookInputAll\":\"bookDetail_addBookInputAll__2QrUm\",\"bookDetailEditAll\":\"bookDetail_bookDetailEditAll__37JSW\",\"addBookEditAll\":\"bookDetail_addBookEditAll__2Z9Kh\",\"btn\":\"bookDetail_btn__1YHih\",\"alert\":\"bookDetail_alert__1Sz69\",\"hide\":\"bookDetail_hide__HNiz7\",\"alertMsg\":\"bookDetail_alertMsg__gX7ON\",\"slide-in-top\":\"bookDetail_slide-in-top__2jcgN\",\"successMsg\":\"bookDetail_successMsg__1iQQD\",\"failMsg\":\"bookDetail_failMsg__3Pq_w\",\"noAlertMsg\":\"bookDetail_noAlertMsg__37Pe4\",\"slide-out-top\":\"bookDetail_slide-out-top__308hS\"};","export default __webpack_public_path__ + \"static/media/success.21820974.jpg\";","export default __webpack_public_path__ + \"static/media/fail.30650b10.png\";","import React, {useState, useEffect} from \"react\";\nimport InputField from \"../Common/InputField\";\nimport {Link, useParams, useHistory} from \"react-router-dom\";\nimport {getData, patchData, deleteData, handleAlert} from \"../util\";\nimport {getBooksUrl} from \"../constants\";\nimport styles from \"../scss/bookDetail.module.scss\";\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faChevronLeft, faEdit} from '@fortawesome/free-solid-svg-icons';\nimport Loading from \"../Common/Loading\";\nimport successImg from '../image/success.jpg';\nimport failImg from '../image/fail.png';\n\nconst BookDetail = () => {\n    let {bookId} = useParams();\n    let history = useHistory();\n    const [bookDetail, setBookDetail] = useState(\"\");\n    const [header, setHeader] = useState(\"\");\n    const [title, setTitle] = useState(\"\");\n    const [author, setAuthor] = useState(\"\");\n    const [desc, setDesc] = useState(\"\");\n    const [alert, setAlert] = useState(\"\");\n    const [isEditable, setIsEditable] = useState(false);\n    const [load, setLoad] = useState(true);\n\n    useEffect(() => {\n        getData(getBooksUrl + bookId).then((res) => {\n            setBookDetail(res.data);\n            setHeader(res.data.title);\n            setLoad(false);\n        })\n    }, [])\n\n    const handleEdit = () => {\n        setIsEditable((pre) => !pre);\n    }\n\n    const handleClearInput = () => {\n        setTitle(\"\");\n        setAuthor(\"\");\n        setDesc(\"\");\n        setAlert(\"\");\n        setIsEditable((pre) => !pre);\n    }\n\n    const handleEditBook = () => {\n        if (title === \"\") {\n            handleAlert(\"請填寫名稱\", setAlert)\n            return\n        }\n        if (author === \"\") {\n            handleAlert(\"請填寫作者\", setAlert)\n            return\n        }\n        if (desc === \"\") {\n            handleAlert(\"請填寫備註\", setAlert)\n            return\n        }\n        const editBookDetail = {\n            title, author, description: desc\n        }\n        patchData(getBooksUrl + bookId + \"/\", editBookDetail)\n            .then((res) => {\n                setBookDetail(res.data);\n                setHeader(`${title}`);\n                setTitle(\"\");\n                setAuthor(\"\");\n                setDesc(\"\");\n                setAlert(\"\");\n                handleAlert(\"修改成功\", setAlert)\n            })\n            .catch(() => {\n                handleAlert(\"修改失敗\", setAlert)\n            })\n    }\n    const handleDeleteBook = () => {\n        deleteData(getBooksUrl + bookId + \"/\")\n            .then(() => {\n                history.push(\"/books\");\n            })\n            .catch(() => {\n                handleAlert(\"刪除失敗\", setAlert)\n            })\n    }\n\n\n    return (\n        <>\n            {load === true && <Loading />}\n            <div className={styles.bookDetailHeader}>\n                <Link to={isEditable ? `/books/${bookId}` : \"/books\"} onClick={isEditable ? handleClearInput : null}\n                      className={styles.backIcon}><FontAwesomeIcon icon={faChevronLeft}/></Link>\n                <h1>{header}</h1>\n                <a onClick={handleEdit} className={isEditable ? styles.hide : styles.editIcon}><FontAwesomeIcon\n                    icon={faEdit}/></a>\n            </div>\n            <div className={styles.bookDetailBody}>\n                <div className={styles.bookDetailInputAll}>\n                    <InputField title={\"名稱\"} editable={isEditable} value={bookDetail.title} method={setTitle}\n                                inputValue={title}/>\n                    <InputField title={\"作者\"} editable={isEditable} value={bookDetail.author} method={setAuthor}\n                                inputValue={author}/>\n                    <InputField title={\"備註\"} editable={isEditable} value={bookDetail.description} method={setDesc}\n                                inputValue={desc}/>\n                </div>\n                <div className={isEditable ? styles.bookDetailEditAll : styles.hide}>\n                    <div className={styles.btn}>\n                        <button onClick={handleClearInput}>取消</button>\n                        <button onClick={handleDeleteBook}>刪除</button>\n                        <button onClick={handleEditBook}>修改</button>\n                    </div>\n                </div>\n            </div>\n            {alert !== \"\" && (\n                <>\n                    <div className={alert !== \"修改失敗\" && alert !== \"修改成功\" && alert !== \"刪除失敗\" ? styles.alertMsg : styles.noAlertMsg}>\n                        <img src={failImg} alt=\"alert\"/>\n                        {alert}\n                    </div>\n                    <div className={alert === \"修改成功\" ? styles.successMsg : styles.noAlertMsg}>\n                        <img src={successImg} alt=\"success\"/>\n                        {alert}\n                    </div>\n                    <div className={alert === \"修改失敗\" || alert === \"刪除失敗\"  ? styles.failMsg : styles.noAlertMsg}>\n                        <img src={failImg} alt=\"fail\"/>\n                        {alert}\n                    </div>\n                </>\n            )}\n        </>\n    );\n}\n\nexport default React.memo(BookDetail);"],"sourceRoot":""}